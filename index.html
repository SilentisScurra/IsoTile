<!DOCTYPE html>
<html>
<head>
    <title>CHOP TREES</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            overflow: hidden;
            font-family: monospace;
            position: relative;
        }
        #canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 2; /* Text on top */
        }
        #iframe-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            opacity: 0;
            pointer-events: none; /* Prevent interaction during fade */
            transition: opacity 1s ease-in-out;
        }
        #iframe-container.fade-in {
            opacity: 1;
            pointer-events: all;
        }
        #iframe-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        #click-to-start {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 3;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            text-align: center;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div id="iframe-container">
        <iframe src="./game/IsoTile_game.html"></iframe>
    </div>

    <script>
        const font3x5 = {
            'A': [0,1,0, 1,0,1, 1,1,1, 1,0,1, 1,0,1],
            'B': [1,1,0, 1,0,1, 1,1,0, 1,0,1, 1,1,0],
            'C': [0,1,1, 1,0,0, 1,0,0, 1,0,0, 0,1,1],
            'D': [1,1,0, 1,0,1, 1,0,1, 1,0,1, 1,1,0],
            'E': [1,1,1, 1,0,0, 1,1,0, 1,0,0, 1,1,1],
            'F': [1,1,1, 1,0,0, 1,1,0, 1,0,0, 1,0,0],
            'G': [0,1,1, 1,0,0, 1,0,1, 1,0,1, 0,1,1],
            'H': [1,0,1, 1,0,1, 1,1,1, 1,0,1, 1,0,1],
            'I': [1,1,1, 0,1,0, 0,1,0, 0,1,0, 1,1,1],
            'J': [0,0,1, 0,0,1, 0,0,1, 1,0,1, 0,1,0],
            'K': [1,0,1, 1,0,1, 1,1,0, 1,0,1, 1,0,1],
            'L': [1,0,0, 1,0,0, 1,0,0, 1,0,0, 1,1,1],
            'M': [1,0,1, 1,1,1, 1,0,1, 1,0,1, 1,0,1],
            'N': [1,1,0, 1,0,1, 1,0,1, 1,0,1, 1,0,1],
            'O': [0,1,0, 1,0,1, 1,0,1, 1,0,1, 0,1,0],
            'P': [1,1,0, 1,0,1, 1,1,0, 1,0,0, 1,0,0],
            'Q': [0,1,0, 1,0,1, 1,0,1, 0,1,0, 0,0,1],
            'R': [1,1,0, 1,0,1, 1,1,0, 1,0,1, 1,0,1],
            'S': [0,1,1, 1,0,0, 0,1,0, 0,0,1, 1,1,0],
            'T': [1,1,1, 0,1,0, 0,1,0, 0,1,0, 0,1,0],
            'U': [1,0,1, 1,0,1, 1,0,1, 1,0,1, 0,1,0],
            'V': [1,0,1, 1,0,1, 1,0,1, 1,0,1, 0,1,0],
            'W': [1,0,1, 1,0,1, 1,0,1, 1,1,1, 1,0,1],
            'X': [1,0,1, 1,0,1, 0,1,0, 1,0,1, 1,0,1],
            'Y': [1,0,1, 1,0,1, 0,1,0, 0,1,0, 0,1,0],
            'Z': [1,1,1, 0,0,1, 0,1,0, 1,0,0, 1,1,1],
            '0': [0,1,0, 1,0,1, 1,0,1, 1,0,1, 0,1,0],
            '1': [0,1,0, 1,1,0, 0,1,0, 0,1,0, 1,1,1],
            '2': [1,1,0, 0,0,1, 0,1,0, 1,0,0, 1,1,1],
            '3': [1,1,0, 0,0,1, 0,1,0, 0,0,1, 1,1,0],
            '4': [1,0,0, 1,0,0, 1,0,1, 1,1,1, 0,0,1],
            '5': [1,1,1, 1,0,0, 1,1,0, 0,0,1, 1,1,0],
            '6': [0,1,0, 1,0,0, 1,1,0, 1,0,1, 0,1,0],
            '7': [1,1,1, 0,0,1, 0,0,1, 0,1,0, 0,1,0],
            '8': [0,1,0, 1,0,1, 0,1,0, 1,0,1, 0,1,0],
            '9': [0,1,0, 1,0,1, 0,1,1, 0,0,1, 0,1,0],
            ':': [0,0,0, 0,1,0, 0,0,0, 0,1,0, 0,0,0],
            '.': [0,0,0, 0,0,0, 0,0,0, 0,0,0, 0,1,0]
        };

        function drawPixelText(str, x, y, color = '#FFF', scale = 1) {
            str = str.toString().toUpperCase();
            let curX = x;
            ctx.fillStyle = color;
            for (let i = 0; i < str.length; i++) {
                let char = str[i];
                if (char === ' ') {
                    curX += 4 * scale;
                    continue;
                }
                let data = font3x5[char];
                if (!data) data = font3x5['.']; // Fallback
                
                for (let r = 0; r < 5; r++) {
                    for (let c = 0; c < 3; c++) {
                        if (data[r * 3 + c]) {
                            ctx.fillRect(curX + (c * scale), y + (r * scale), scale, scale);
                        }
                    }
                }
                curX += 4 * scale; 
            }
        }

        // Initialize canvas
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        // Set canvas to full window size
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const iframeContainer = document.getElementById('iframe-container');

        //const poll = setInterval(() => { const val = iframeContainer.contentWindow.gameOver; if (val) { clearInterval(poll);console.log('Player has won! ✅');}}, 500);   // every 250 ms (adjust to your needs)

        // Draw text
        drawPixelText("CHOP TREES", 
            (window.innerWidth - (10 * 4 * 2)) / 2, 
            window.innerHeight / 2 - 10, 
            '#FFF', 
            10
        );
        
        // Handle window resize
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            // Redraw text
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawPixelText("CHOP TREES", 
                (window.innerWidth - (10 * 4 * 2)) / 2, 
                window.innerHeight / 2 - 10, 
                '#FFF', 
                10
            );
        });

        document.body.addEventListener('click', function() {
            // Hide canvas and text
            const canvas = document.getElementById('canvas');
            canvas.style.display = 'none';
            
            // Fade in iframe
            iframeContainer.classList.add('fade-in');
            
            // Remove click handler and hide click indicator
            document.body.removeEventListener('click', arguments.callee);
            document.getElementById('click-to-start').style.display = 'none';
        });

    </script>
</body>
</html>
